import{r as h,M as S,u as A,C,a as P,c as T,j as o,B as V,b as B,a4 as I,V as Y}from"./index-263c4f3f.js";import{G as z}from"./ground-00167982.js";const O=({coordinateMapper:c,nGridRows:e=100,nGridCols:t=100,cubeSideLength:s=.025,cubeSpacingScalar:l=5})=>{const n=h.useRef(null),M=h.useMemo(()=>new S,[]),{palette:w}=A(),g=C.getPalette(w).buildLut();return h.useEffect(()=>{if(!g)return;const d=Math.hypot(.5,.5);let u,m,x,i;for(let a=0;a<e;a++)for(let r=0;r<t;r++)u=a*t+r,m=a/(e-1),x=r/(t-1),i=Math.hypot(m-.5,x-.5)/d,n.current.setColorAt(u,g.getColor(i));n.current.instanceColor.needsUpdate=!0}),P(({clock:d})=>{const u=d.getElapsedTime(),m=e*l*s,x=t*l*s;let i,a,r,j,y,E;for(let p=0;p<e;p++)for(let f=0;f<t;f++)i=p*t+f,a=p/(e-1),r=f/(t-1),E=c.map(T.CARTESIAN_2D,a,r,0,u),j=m*(a-.5),y=x*(r-.5),M.setPosition(j,y,E),n.current.setMatrixAt(i,M);n.current.instanceMatrix.needsUpdate=!0}),o.jsxs("instancedMesh",{ref:n,castShadow:!0,receiveShadow:!0,args:[new V,new B,e*t],children:[o.jsx("boxGeometry",{attach:"geometry",args:[s,s,s,1]}),o.jsx("meshPhongMaterial",{attach:"material",color:"white",toneMapped:!1})]})},D=({coordinateMapper:c})=>{const{nRows:e,nCols:t,unitSideLength:s,unitSpacingScalar:l}=I();return o.jsxs(o.Fragment,{children:[o.jsx(O,{coordinateMapper:c,nGridRows:e,nGridCols:t,cubeSideLength:s,cubeSpacingScalar:l}),o.jsx(z,{position:new Y(0,0,-2.5*c.amplitude)})]})};export{D as default};
