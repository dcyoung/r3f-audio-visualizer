import{r as M,M as w,u as E,C as P,a as R,c as S,T as f,j as t,B as T,b as B,aH as I,V}from"./index-8f6c4088.js";import{G as y}from"./ground-d293afaa.js";const A=({coordinateMapper:n,radius:r=2,nPoints:e=800,cubeSideLength:o=.05})=>{const a=M.useRef(null),C=M.useMemo(()=>new w,[]),{palette:g}=E(),m=P.getPalette(g).buildLut();return M.useEffect(()=>{for(let s=0;s<e;s++)a.current.setColorAt(s,m.getColor(s/e));a.current.instanceColor.needsUpdate=!0},[m,a]),R(({clock:s})=>{const j=s.getElapsedTime();let h,i,c,x,p,d,u;for(let l=0;l<e;l++)h=l+.5,i=Math.acos(1-2*h/e)%Math.PI,c=Math.PI*(1+Math.sqrt(5))*h%f,x=Math.cos(c)*Math.sin(i),p=Math.sin(c)*Math.sin(i),d=Math.cos(i),u=r+.25*r*n.map(S.POLAR,c/f,i/Math.PI,0,j),a.current.setMatrixAt(l,C.setPosition(x*u,p*u,d*u));a.current.instanceMatrix.needsUpdate=!0}),t.jsxs("instancedMesh",{ref:a,castShadow:!0,receiveShadow:!0,args:[new T,new B,e],children:[t.jsx("boxGeometry",{attach:"geometry",args:[o,o,o,1]}),t.jsx("meshBasicMaterial",{attach:"material",color:"white",toneMapped:!1})]})},b=({coordinateMapper:n})=>{const{radius:r,nPoints:e,unitSideLength:o}=I();return t.jsxs(t.Fragment,{children:[t.jsx(A,{coordinateMapper:n,radius:r,nPoints:e,cubeSideLength:o}),t.jsx(y,{position:new V(0,0,-r*(1+.25*n.amplitude))})]})};export{b as default};
