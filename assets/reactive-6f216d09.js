import{r as h,M as S,u as A,C,a as P,c as T,j as o,B as V,b as B,a5 as I,G as Y,V as z}from"./index-73ed3023.js";const O=({coordinateMapper:c,nGridRows:e=100,nGridCols:t=100,cubeSideLength:r=.025,cubeSpacingScalar:l=5})=>{const n=h.useRef(null),M=h.useMemo(()=>new S,[]),{palette:w}=A(),g=C.getPalette(w).buildLut();return h.useEffect(()=>{if(!g)return;const f=Math.hypot(.5,.5);let u,m,x,i;for(let a=0;a<e;a++)for(let s=0;s<t;s++)u=a*t+s,m=a/(e-1),x=s/(t-1),i=Math.hypot(m-.5,x-.5)/f,n.current.setColorAt(u,g.getColor(i));n.current.instanceColor.needsUpdate=!0}),P(({clock:f})=>{const u=f.getElapsedTime(),m=e*l*r,x=t*l*r;let i,a,s,j,y,E;for(let p=0;p<e;p++)for(let d=0;d<t;d++)i=p*t+d,a=p/(e-1),s=d/(t-1),E=c.map(T.CARTESIAN_2D,a,s,0,u),j=m*(a-.5),y=x*(s-.5),M.setPosition(j,y,E),n.current.setMatrixAt(i,M);n.current.instanceMatrix.needsUpdate=!0}),o.jsxs("instancedMesh",{ref:n,castShadow:!0,receiveShadow:!0,args:[new V,new B,e*t],children:[o.jsx("boxGeometry",{attach:"geometry",args:[r,r,r,1]}),o.jsx("meshPhongMaterial",{attach:"material",color:"white",toneMapped:!1})]})},X=({coordinateMapper:c})=>{const{nRows:e,nCols:t,unitSideLength:r,unitSpacingScalar:l}=I();return o.jsxs(o.Fragment,{children:[o.jsx(O,{coordinateMapper:c,nGridRows:e,nGridCols:t,cubeSideLength:r,cubeSpacingScalar:l}),o.jsx(Y,{position:new z(0,0,-2.5*c.amplitude)})]})};export{X as default};
