import{r as M,M as w,u as E,C as R,a as S,c as T,T as f,j as t,B,b as I,a6 as P,G as V,V as y}from"./index-73ed3023.js";const A=({coordinateMapper:n,radius:r=2,nPoints:e=800,cubeSideLength:o=.05})=>{const a=M.useRef(null),C=M.useMemo(()=>new w,[]),{palette:g}=E(),x=R.getPalette(g).buildLut();return M.useEffect(()=>{for(let s=0;s<e;s++)a.current.setColorAt(s,x.getColor(s/e));a.current.instanceColor.needsUpdate=!0},[x,a,e]),S(({clock:s})=>{const j=s.getElapsedTime();let h,i,c,m,p,d,u;for(let l=0;l<e;l++)h=l+.5,i=Math.acos(1-2*h/e)%Math.PI,c=Math.PI*(1+Math.sqrt(5))*h%f,m=Math.cos(c)*Math.sin(i),p=Math.sin(c)*Math.sin(i),d=Math.cos(i),u=r+.25*r*n.map(T.POLAR,c/f,i/Math.PI,0,j),a.current.setMatrixAt(l,C.setPosition(m*u,p*u,d*u));a.current.instanceMatrix.needsUpdate=!0}),t.jsxs("instancedMesh",{ref:a,castShadow:!0,receiveShadow:!0,args:[new B,new I,e],children:[t.jsx("boxGeometry",{attach:"geometry",args:[o,o,o,1]}),t.jsx("meshBasicMaterial",{attach:"material",color:"white",toneMapped:!1})]})},O=({coordinateMapper:n})=>{const{radius:r,nPoints:e,unitSideLength:o}=P();return t.jsxs(t.Fragment,{children:[t.jsx(A,{coordinateMapper:n,radius:r,nPoints:e,cubeSideLength:o}),t.jsx(V,{position:new y(0,0,-r*(1+.25*n.amplitude))})]})};export{O as default};
