import{r as l,V as g,a as w,j as o,aK as y}from"./index-8f6c4088.js";import{G as b}from"./ground-d293afaa.js";const M=({motionMapper:m,maxPoints:n=1e3,pointSize:x=.2,maxDim:a=2,color:j="white"})=>{const s=Math.max(1,Math.floor(Math.cbrt(n))),d=Math.pow(s,3),h=l.useRef(null),i=l.useMemo(()=>new g,[]),u=l.useMemo(()=>new g,[]);return l.useEffect(()=>{const c=h.current.geometry.attributes.position,r=a/s;let f=0;for(let e=0;e<s;e++)for(let t=0;t<s;t++)for(let p=0;p<s;p++)f=e*(s*s)+t*s+p,c.setXYZ(f,-a/2+e*r,-a/2+t*r,-a/2+p*r);c.needsUpdate=!0}),w(({clock:c},r)=>{const f=c.getElapsedTime(),e=h.current.geometry.attributes.position;for(let t=0;t<d;t++)i.x=e.getX(t),i.y=e.getY(t),i.z=e.getZ(t),m.map(i,r,f,u),e.setXYZ(t,u.x,u.y,u.z);e.needsUpdate=!0}),o.jsxs("points",{ref:h,children:[o.jsx("bufferGeometry",{children:o.jsx("bufferAttribute",{attach:"attributes-position",array:new Float32Array(d*3),count:d,itemSize:3})}),o.jsx("pointsMaterial",{attach:"material",color:j,size:x})]})},P=({motionMapper:m})=>{const{maxDim:n,pointSize:x}=y();return o.jsxs(o.Fragment,{children:[o.jsx(M,{motionMapper:m,maxDim:n,pointSize:x}),o.jsx(b,{position:new g(0,0,-1.5*n)})]})};export{P as default};
